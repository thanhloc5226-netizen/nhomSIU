{% extends 'base.html' %}

{% block body_block %}
{% load static %}
<link href="{% static 'css/khachhang.css' %}" rel="stylesheet">
   <script src="{% static 'js/khachhang.js' %}"></script>
<a href="{% url 'add_customer' %}" class="btn-add-customer">
    <span class="btn-icon">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
    </span>
    <span class="btn-text">Th√™m kh√°ch h√†ng</span>
    <span class="btn-shine"></span>
</a>


<form method="get">
    <div class="search-section">
        <h3>üîç T√¨m Ki·∫øm Kh√°ch H√†ng</h3>

        <div class="row g-2 mt-2">
            <div class="col-12 col-md-6 col-lg-8">
                <input type="text"
                       name="q"
                       value="{{ request.GET.q }}"
                       class="form-control"
                       placeholder="Nh·∫≠p m√£ KH, t√™n, email, SƒêT...">
            </div>

            <div class="col-6 col-md-3 col-lg-2">
                <button type="submit" class="btn btn-primary w-100">üîç T√¨m ki·∫øm</button>
            </div>

            <div class="col-6 col-md-3 col-lg-2">
                <a href="{% url 'home' %}" class="btn btn-secondary w-100">‚úñ X√≥a</a>
            </div>
        </div>
    </div>
</form>

<!-- ===== N√öT ·∫®N / HI·ªÜN C·ªòT - REDESIGNED ===== -->
<div class="column-control-wrapper mb-3">
    <button class="btn btn-column-toggle"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#columnToggle">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
        </svg>
        <span>T√πy ch·ªânh hi·ªÉn th·ªã c·ªôt</span>
    </button>

    <div id="columnToggle" class="collapse">
        <div class="column-toggle-grid">

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-code" checked onchange="toggleColumn('col-code')">
                <label for="toggle-code">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">M√£ KH</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-name" checked onchange="toggleColumn('col-name')">
                <label for="toggle-name">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">T√™n</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-email" checked onchange="toggleColumn('col-email')">
                <label for="toggle-email">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">Email</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-phone" checked onchange="toggleColumn('col-phone')">
                <label for="toggle-phone">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">SƒêT</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-address" checked onchange="toggleColumn('col-address')">
                <label for="toggle-address">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">ƒê·ªãa ch·ªâ</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-status" checked onchange="toggleColumn('col-status')">
                <label for="toggle-status">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">Tr·∫°ng th√°i</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-note" checked onchange="toggleColumn('col-note')">
                <label for="toggle-note">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">Ghi ch√∫</span>
                </label>
            </div>

            <div class="column-toggle-item">
                <input type="checkbox" id="toggle-created" checked onchange="toggleColumn('col-created')">
                <label for="toggle-created">
                    <span class="checkbox-custom"></span>
                    <span class="label-text">Ng√†y t·∫°o</span>
                </label>
            </div>

        </div>
    </div>
</div>



<!-- ===== TABLE ===== -->
<div class="table-container">
<table id="contractTable" class="table table-bordered table-hover">
<thead>
<tr>
    <th>STT</th>
    <th class="col-code">M√£ KH</th>
    <th class="col-name">T√™n</th>
    <th class="col-email">Email</th>
    <th class="col-phone">SƒêT</th>
    <th class="col-address">ƒê·ªãa ch·ªâ</th>
    <th class="col-status">Tr·∫°ng th√°i</th>
    <th class="col-note">Ghi ch√∫</th>
    <th class="col-created">Ng√†y t·∫°o</th>
    <th>H√†nh ƒë·ªông</th>
</tr>
</thead>

<tbody>
{% for c in customers %}
<tr>
    <td>{{ forloop.counter }}</td>
    <td class="col-code">{{ c.customer_code }}</td>
    <td class="col-name">{{ c.name }}</td>
    <td class="col-email">{{ c.email }}</td>
    <td class="col-phone">{{ c.phone }}</td>
    <td class="col-address">{{ c.address }}</td>

    <!-- ===== STATUS (ƒê√É S·ª¨A - HI·ªÇN TH·ªä ƒê·∫¶Y ƒê·ª¶) ===== -->
    <td class="col-status">
    {% if c.status == 'approved' %}
        <span class="badge bg-success">
            {{ c.get_status_display }}
        </span>

    {% elif c.status == 'pending' %}
        <span class="badge bg-warning text-dark">
            {{ c.get_status_display }}
        </span>

    {% elif c.status == 'completed' %}
        <span class="badge bg-primary">
            {{ c.get_status_display }}
        </span>

    {% else %}
        <span class="badge bg-secondary">
            {{ c.get_status_display }}
        </span>
    {% endif %}
</td>


    <!-- ===== NOTE ===== -->
    <td class="col-note">
        {{ c.note|default:"‚Äî"|truncatechars:30 }}
    </td>

    <td class="col-created">{{ c.created_at|date:"d/m/Y H:i" }}</td>
    <td>
        <a href="{% url 'customer_detail' c.id %}" class="btn btn-sm btn-info">Xem</a>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="10" class="text-center">Ch∆∞a c√≥ kh√°ch h√†ng n√†o</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
<div class="mascot-header" data-aos="fade-right">
    <div class="header-decoration-mascot" style="margin-top:4%"></div>
    <h1 class="mascot-title"  style="margin-top:4%">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
            <line x1="9" y1="9" x2="9.01" y2="9"></line>
            <line x1="15" y1="9" x2="15.01" y2="9"></line>
        </svg>
        B·∫£n Quy·ªÅn Nh√¢n V·∫≠t
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M8 14s1.5 2 4 2 4-2 4-2"></path>
            <line x1="9" y1="9" x2="9.01" y2="9"></line>
            <line x1="15" y1="9" x2="15.01" y2="9"></line>
        </svg>
    </h1>
    <div class="header-decoration-mascot" style="margin-top:4%"></div>
</div>

<section class="mascot_body" style="margin-top:-15%">
    <div class="carousel_mascot" data-aos="fade-right">
        {% for mascot in mascots %}
        <div class="card_mascot" data-title="{{ mascot.title }}">
            <div class="speech_mascot">{{ mascot.speech }}</div>
            <img src="{{ mascot.image.url }}" alt="{{ mascot.title }}">
        </div>
        {% endfor %}
    </div>
</section>



<div class="khtt-header" style="margin-top:-6%">
    <div class="header-decoration"></div>
    <h1 class="khtt-title">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        Kh√°ch H√†ng Th√¢n Thi·∫øt
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
    </h1>
    <div class="header-decoration"></div>
</div>



<section class="khtt-section" style="margin-top:10%">
    <a class="play-pause-btn_khtt" id="playPauseBtn_khtt"></a>
    <div class="main-container_khtt">
        <div class="carousel-section_khtt">
            <div class="carousel-container_khtt">
                <div class="carousel-track_khtt">
                    {% for customer in loyal_customers %}
                    <div class="card_khtt" data-index="{{ forloop.counter0 }}">
                        <img src="{{ customer.image.url }}" alt="{{ customer.name }}">
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="controls-section_khtt">
            <div class="nav-controls_khtt">
                <button class="nav-arrow_khtt up_khtt">
                    <img src="https://ik.imagekit.io/gopichakradhar/icons/top.png" alt="Up">
                </button>
                <button class="nav-arrow_khtt down_khtt">
                    <img src="https://ik.imagekit.io/gopichakradhar/icons/down.png" alt="Down">
                </button>
            </div>

            <div class="member-info_khtt">
                <h2 class="member-name_khtt">{{ loyal_customers.0.name }}</h2>
                <p class="member-role_khtt">{{ loyal_customers.0.role }}</p>
            </div>

            <div class="dots_khtt">
                {% for customer in loyal_customers %}
                <div class="dot_khtt {% if forloop.first %}active_khtt{% endif %}" data-index="{{ forloop.counter0 }}"></div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>


<style>
    /*==========================================================================================
tieu de khach hang than thiet
============================================================================================*/
    /* Import Google Fonts h·ªó tr·ª£ ti·∫øng Vi·ªát */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@700;800;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@700;800;900&display=swap');

/* Header Styles */
.khtt-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 40px;
    padding: 30px 20px;
    position: relative;
}

.header-decoration {
    flex: 1;
    height: 3px;
    background: linear-gradient(90deg, transparent 0%, #BE1E2D 50%, transparent 100%);
    max-width: 200px;
}

.khtt-title {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 42px;
    font-weight: 800;
    color: #BE1E2D;
    margin: 0;
    text-align: center;
    letter-spacing: -0.5px;
    text-transform: uppercase;
    position: relative;
    padding: 0 20px;

    /* Ch·ªçn 1 trong c√°c font d∆∞·ªõi ƒë√¢y */

    /* Option 1: Be Vietnam Pro - Font Vi·ªát Nam chuy√™n nghi·ªáp */
    font-family: 'Be Vietnam Pro', sans-serif;

    /* Option 2: Montserrat - Hi·ªán ƒë·∫°i, bold, h·ªó tr·ª£ ti·∫øng Vi·ªát t·ªët */
    /* font-family: 'Montserrat', sans-serif; */

    /* Option 3: Quicksand - M·ªÅm m·∫°i, th√¢n thi·ªán */
    /* font-family: 'Quicksand', sans-serif; */

    /* Option 4: Nunito - Tr√≤n tr·ªãa, d·ªÖ ƒë·ªçc */
    /* font-family: 'Nunito', sans-serif; */

    /* Option 5: System fonts - An to√†n nh·∫•t */
    /* font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif; */
}

.khtt-title::before {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 4px;
    background: linear-gradient(90deg, transparent 0%, #BE1E2D 50%, transparent 100%);
    border-radius: 2px;
}

.khtt-title svg {
    color: #BE1E2D;
    flex-shrink: 0;
    animation: heartbeat 1.5s ease-in-out infinite;
}

@keyframes heartbeat {
    0%, 100% {
        transform: scale(1);
    }
    25% {
        transform: scale(1.1);
    }
    50% {
        transform: scale(1);
    }
}

/* Responsive Styles */
@media (max-width: 768px) {
    .khtt-header {
        flex-direction: column;
        gap: 16px;
        padding: 20px;
    }

    .header-decoration {
        width: 100%;
        max-width: 150px;
    }

    .khtt-title {
        font-size: 28px;
        gap: 12px;
        flex-wrap: wrap;
        justify-content: center;
        padding: 0 10px;
    }

    .khtt-title svg {
        width: 24px;
        height: 24px;
    }

    .khtt-title::before {
        width: 60%;
    }
}

@media (max-width: 480px) {
    .khtt-title {
        font-size: 22px;
        gap: 8px;
    }

    .khtt-title svg {
        width: 20px;
        height: 20px;
    }

    .header-decoration {
        max-width: 80px;
    }
}

/*==========================================================================================
tieu de mascot
============================================================================================*/
/* Import Google Fonts - H·ªó tr·ª£ ti·∫øng Vi·ªát t·ªët */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap');

/* Mascot Header Styles */
.mascot-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 40px;
    padding: 30px 20px;
    position: relative;
    font-family: 'Nunito', 'Segoe UI', Tahoma, sans-serif;
}

.header-decoration-mascot {
    flex: 1;
    height: 3px;
    background: linear-gradient(90deg, transparent 0%, #BE1E2D 50%, transparent 100%);
    max-width: 200px;
}

.mascot-title {
    display: flex;
    align-items: center;
    gap: 16px;
    font-size: 48px;
    font-weight: 900;
    color: #BE1E2D;
    margin: 0;
    text-align: center;
    letter-spacing: 4px;
    text-transform: uppercase;
    position: relative;
    padding: 0 20px;
    text-shadow: 2px 2px 4px rgba(190, 30, 45, 0.1);
    font-family: 'Nunito', 'Segoe UI', Tahoma, sans-serif;
}

.mascot-title::before {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60%;
    height: 4px;
    background: linear-gradient(90deg, transparent 0%, #BE1E2D 50%, transparent 100%);
    border-radius: 2px;
}

.mascot-title svg {
    color: #BE1E2D;
    flex-shrink: 0;
    animation: bounce-mascot 2s ease-in-out infinite;
}

@keyframes bounce-mascot {
    0%, 100% {
        transform: translateY(0) rotate(0deg);
    }
    25% {
        transform: translateY(-5px) rotate(-5deg);
    }
    50% {
        transform: translateY(0) rotate(0deg);
    }
    75% {
        transform: translateY(-5px) rotate(5deg);
    }
}

/* Alternative: Playful Style */
.mascot-title.playful {
    background: linear-gradient(135deg, #BE1E2D 0%, #e63946 50%, #BE1E2D 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-shift 3s ease infinite;
    background-size: 200% 200%;
}

@keyframes gradient-shift {
    0%, 100% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
}

/* Mascot Body Section */
.mascot_body {
    position: relative;
    padding: 20px 0;
}

/* Responsive Styles */
@media (max-width: 768px) {
    .mascot-header {
        flex-direction: column;
        gap: 16px;
        padding: 20px;
    }

    .header-decoration-mascot {
        width: 100%;
        max-width: 150px;
    }

    .mascot-title {
        font-size: 32px;
        gap: 12px;
        letter-spacing: 2px;
        flex-wrap: wrap;
        justify-content: center;
        padding: 0 10px;
    }

    .mascot-title svg {
        width: 24px;
        height: 24px;
    }

    .mascot-title::before {
        width: 50%;
    }
}

@media (max-width: 480px) {
    .mascot-title {
        font-size: 24px;
        gap: 8px;
        letter-spacing: 1px;
    }

    .mascot-title svg {
        width: 20px;
        height: 20px;
    }

    .header-decoration-mascot {
        max-width: 80px;
    }
}

/* Alternative Style Option 1: Card Style */
.mascot-header.card-style {
    background: white;
    border: 3px solid #BE1E2D;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 8px 24px rgba(190, 30, 45, 0.15);
}

/* Alternative Style Option 2: Ribbon Style */
.mascot-title.ribbon-style {
    background: #BE1E2D;
    color: white;
    padding: 15px 40px;
    position: relative;
    clip-path: polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%);
}

.mascot-title.ribbon-style::before {
    display: none;
}

.mascot-title.ribbon-style svg {
    color: white;
}

/* Alternative Style Option 3: 3D Effect */
.mascot-title.effect-3d {
    text-shadow:
        1px 1px 0 #a01827,
        2px 2px 0 #a01827,
        3px 3px 0 #a01827,
        4px 4px 0 #a01827,
        5px 5px 10px rgba(190, 30, 45, 0.3);
}

/* Alternative Style Option 4: Outlined */
.mascot-title.outlined {
    color: transparent;
    -webkit-text-stroke: 3px #BE1E2D;
    text-stroke: 3px #BE1E2D;
}

.mascot-title.outlined svg {
    filter: drop-shadow(0 0 2px #BE1E2D);
}
</style>


<script>
    const teamMembers_khtt = [
        {% for customer in loyal_customers %}
        {
            name: "{{ customer.name|escapejs }}",
            role: "{{ customer.role|escapejs }}"
        }{% if not forloop.last %},{% endif %}
        {% endfor %}
    ];
</script>




{% endblock %}